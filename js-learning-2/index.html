<!-- build time:Wed Jun 07 2023 16:42:47 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="刘欢の博客" href="http://www.liuhuanblog.top/rss.xml"><link rel="alternate" type="application/atom+xml" title="刘欢の博客" href="http://www.liuhuanblog.top/atom.xml"><link rel="alternate" type="application/json" title="刘欢の博客" href="http://www.liuhuanblog.top/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="前端,JavaScript"><link rel="canonical" href="http://www.liuhuanblog.top/js-learning-2/"><title>深入 JavaScript 学习之路（二）JavaScript 中的类 - JavaScript - 前端 - 笔记 | liuhuan = 刘欢の博客 = 整这么花，你不要命了！</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline"><a href="/js-learning-2" class="link external" itemprop="url">深入 JavaScript 学习之路（二）JavaScript 中的类<i class="ic i-link-alt"></i></a></h1><div class="meta"><span class="item" title="创建时间：2022-03-17 23:50:52"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-03-17T23:50:52+08:00">2022-03-17</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>8.6k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>8 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">liuhuan</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="/img/header_img/galaxy-ngc-3190-wallpaper-for-2880x1800-60-653.jpg"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/note/" itemprop="item" rel="index" title="分类于 笔记"><span itemprop="name">笔记</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/note/front-end/" itemprop="item" rel="index" title="分类于 前端"><span itemprop="name">前端</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/note/front-end/javascript/" itemprop="item" rel="index" title="分类于 JavaScript"><span itemprop="name">JavaScript</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://www.liuhuanblog.top/js-learning-2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/img/avatar.jpg"><meta itemprop="name" content="liuhuan"><meta itemprop="description" content="整这么花，你不要命了！, 东偶已逝 桑榆非晚"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="刘欢の博客"></span><div class="body md" itemprop="articleBody"><p>上一节都是基于 ES5 的特性来模拟实现类似于类 class 的行为，不难看出这些方法各有各自的问题，实现继承的代码也显得非常冗长和混乱。因此， <code>ES6</code> 中新引入的 <code>class</code> 关键字具备了正式定义类的能力，它实际上是一个<strong>语法糖</strong>，背后使用的仍然是原型和构造函数的概念。</p><h1 id="类定义"><a class="anchor" href="#类定义">#</a> 类定义</h1><p>类声明与类表达式两种定义方法，都使用 <code>class</code> 关键字</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 类声明</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> 	</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 类表达式</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">const</span> Animal <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>与函数表达式类似，<strong>类表达式在它们被求值前也不能引用</strong>。<br>但不同之处在于</p><ul><li><strong>函数声明可以提升，而类定义不能提升</strong></li><li>函数受 <strong>函数作用域</strong> 限制，类受 <strong>块作用域</strong> 限制</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 函数声明可以提升，而类定义不能提升 *</span></pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>FunctionExpression<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined </span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">var</span> <span class="token function-variable function">FunctionExpression</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>FunctionExpression<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function() &#123;&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ClassExpression<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined </span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">var</span> ClassExpression <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ClassExpression<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// class &#123;&#125; </span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 函数受函数作用域限制，类受块作用域限制</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">function</span> <span class="token function">FunctionDeclaration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">class</span> <span class="token class-name">ClassDeclaration</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>FunctionDeclaration<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// FunctionDeclaration() &#123;&#125; </span></pre></td></tr><tr><td data-num="15"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ClassDeclaration<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError: ClassDeclaration is not defined</span></pre></td></tr></table></figure><h2 id="类构成"><a class="anchor" href="#类构成">#</a> 类构成</h2><p>类可以包括以下方法，但都不是必须的，空的类定义仍然有效。</p><ul><li>构造函数（constructor）</li><li>获取函数及设置函数（get 和 set）</li><li>静态类方法（static）</li><li>其他实例方法</li></ul><p>默认情况下，类定义中的代码都在 <strong>严格模式</strong> 下执行。<br>首字母大写这个就不必多说了，可以用于区分通过他创建的实例</p><p><strong>类表达式</strong>的<strong>名称</strong>是<strong>可选</strong>的。在把类表达式赋值给变量后，可以通过 <code>name</code> 属性取得类表达式的名称字符串。但不能在类表达式作用域外部访问这个标识符。</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">let</span> Person <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">PersonName</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>name<span class="token punctuation">,</span> PersonName<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>p<span class="token punctuation">.</span><span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// PersonName PersonName </span></pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// PersonName </span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>PersonName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError: PersonName is not defined</span></pre></td></tr></table></figure><h1 id="类构造函数"><a class="anchor" href="#类构造函数">#</a> 类构造函数</h1><p><code>constructor</code> 关键字用于在类定义块内部<strong>创建类的构造函数</strong>。</p><ul><li><code>constructor</code> 会告诉解释器：使用 <code>new</code> 操作符创建类的新实例时，应该<strong>调用这个函数。</strong></li><li>构造函数的定义<strong>不是必需</strong>的，<strong>不定义构造函数</strong>相当于将构造函数<strong>定义为空函数</strong>。</li></ul><h2 id="1-实例化"><a class="anchor" href="#1-实例化">#</a> 1、实例化</h2><p>constructor 函数实际上也是个语法糖，他让 JS 解释器知道使用 <code>new</code> 来定义类的一个实例时应使用 <code>constructor</code> 函数进行实例化。</p><p>让我们复习一下使用 <code>new</code> 调用构造函数所执行的操作：</p><ul><li>在内存中创建一个新对象 <code>let obj = new Object()</code></li><li>将新对象内部的 <code>[[Prototype]]</code> 赋值为构造函数的 <code>prototype</code> <code>obj.__proto__ = constructor.prototype;</code></li><li>构造函数内部的 <code>this</code> 指向这个新对象</li><li>执行这个构造函数内部代码<ul><li>上述两步 相当于 <code>let res = contructor.apply(obj, args)</code></li></ul></li><li>若构造函数返回 <strong>非空对象</strong>， 则<strong>返回该对象</strong> <code>res</code> ；否则，返回刚创建的新对象 <code>obj</code><ul><li><code>return typeof res === 'object' ? res: obj;</code></li></ul></li></ul><p>类实例化时传入的参数会作为<strong>构造函数的参数</strong>，若不需要参数，则类名后面的括号也是可选的 可以直接 <code>new Person</code></p><p>类构造函数会在执行之后返回一个对象，这个对象会被用作实例化的对象。<br>注意：若构造函数返回的这个对象 <code>res</code> 是一个非空对象，且这个对象与 new 中第一步新建的对象 <code>obj</code> 无关系，则新建的对象会被回收哦，而且通过 <code>instanceof</code> 检测是无法检测出跟该类有关联，因为并没有修改原型指针。</p><h2 id="2-类的本质"><a class="anchor" href="#2-类的本质">#</a> 2、类的本质？</h2><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// class Person &#123;&#125; </span></pre></td></tr><tr><td data-num="3"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function</span></pre></td></tr></table></figure><p>是函数！前面也说到了，它本质上就是一个语法糖，所以它具有跟函数一样的行为。<br>可以向其他对象或函数引用一样将其当作参数传递，也可以立即实例化（类似函数表达式的立即执行）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 类可以像函数一样在任何地方定义，比如在数组中</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> classList <span class="token operator">=</span> <span class="token punctuation">[</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">class</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>			<span class="token keyword">this</span><span class="token punctuation">.</span>id_ <span class="token operator">=</span> id<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">instance </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>id_<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">]</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">function</span> <span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token parameter">classDefinition<span class="token punctuation">,</span> id</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">classDefinition</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token function">createInstance</span><span class="token punctuation">(</span>classList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3141</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// instance 3141 </span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 立即执行</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">class</span> Foo <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="18"></td><td><pre>		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bar </span></pre></td></tr><tr><td data-num="21"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Foo &#123;&#125;</span></pre></td></tr></table></figure><h1 id="实例-原型和类成员"><a class="anchor" href="#实例-原型和类成员">#</a> 实例、原型和类成员</h1><p>类可以非常方便的定义以下三种成员，跟其它语言相似。</p><ul><li>实例上的成员</li><li>原型上的成员</li><li>类本身的成员（静态类成员）</li></ul><h2 id="实例成员"><a class="anchor" href="#实例成员">#</a> 实例成员</h2><p>在 <code>constructor</code> 中可以通过 this 为新创建的实例添加自有属性，每个实例是不会共享这里的属性的。</p><ul><li>ps：在类块中直接写的成员也会成为实例属性</li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>	sex <span class="token operator">=</span> <span class="token string">'女'</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	age <span class="token operator">=</span> <span class="token number">21</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token comment">// 这个例子先使用对象包装类型定义一个字符串</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token comment">// 为的是在下面测试两个对象的相等性</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'Jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>nicknames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Jake'</span><span class="token punctuation">,</span> <span class="token string">'J-Dog'</span><span class="token punctuation">]</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </pre></td></tr><tr><td data-num="13"></td><td><pre> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre>p1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Jack </span></pre></td></tr><tr><td data-num="15"></td><td><pre>p2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Jack </span></pre></td></tr><tr><td data-num="16"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>name <span class="token operator">===</span> p2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false </span></pre></td></tr><tr><td data-num="17"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>sayName <span class="token operator">===</span> p2<span class="token punctuation">.</span>sayName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false </span></pre></td></tr><tr><td data-num="18"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>nicknames <span class="token operator">===</span> p2<span class="token punctuation">.</span>nicknames<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false </span></pre></td></tr><tr><td data-num="19"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>sex<span class="token punctuation">,</span> p1<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 女 21</span></pre></td></tr></table></figure><h2 id="原型成员"><a class="anchor" href="#原型成员">#</a> 原型成员</h2><p>将在类块中定义的方法作为原型方法（在所有实例中共享）</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 添加到 this 的所有内容都会存在于不同的实例上</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">locate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'instance'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 在类块中定义的所有内容都会定义在类的原型上</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">locate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'prototype'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>p<span class="token punctuation">.</span><span class="token function">locate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// instance </span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">locate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prototype</span></pre></td></tr></table></figure><p>类定义也支持获取和设置访问器。语法与行为跟普通对象一样：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>	sex <span class="token operator">=</span> <span class="token string">'女'</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	age <span class="token operator">=</span> <span class="token number">21</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">this</span><span class="token punctuation">.</span>nicknames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Jake'</span><span class="token punctuation">,</span> <span class="token string">'J-Dog'</span><span class="token punctuation">]</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>name_ <span class="token operator">=</span> newName<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">get</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name_<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="16"></td><td><pre>p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'cosine'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="17"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cosine</span></pre></td></tr></table></figure><h2 id="静态类方法"><a class="anchor" href="#静态类方法">#</a> 静态类方法</h2><p>静态类成员在类定义中使用 <code>static</code> 关键字作为前缀。在静态成员中， <code>this</code> 引用类自身。可以通过类名。方法名直接访问</p><h2 id="非函数原型和类成员"><a class="anchor" href="#非函数原型和类成员">#</a> 非函数原型和类成员</h2><p>虽然类定义并不显式支持在原型或类上添加成员数据，但在类定义外部，可以手动添加：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 在类上定义数据成员</span></pre></td></tr><tr><td data-num="2"></td><td><pre>Person<span class="token punctuation">.</span>greeting <span class="token operator">=</span> <span class="token string">'My name is'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 在原型上定义数据成员</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Jake'</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul><li>但是不建议这么做，在原型和类上添加可变数据成员是一种反模式。一般来说，对象实例应该独自拥有通过 <code>this</code> 引用的数据</li></ul><h2 id="迭代器与生成器方法"><a class="anchor" href="#迭代器与生成器方法">#</a> 迭代器与生成器方法</h2><p>类定义语法支持在原型和类本身上定义生成器方法：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token comment">// 在原型上定义生成器方法</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token operator">*</span><span class="token function">createNicknameIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">yield</span> <span class="token string">'cosine1'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">yield</span> <span class="token string">'cosine2'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">yield</span> <span class="token string">'cosine3'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token comment">// 在类上定义生成器方法</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">static</span> <span class="token operator">*</span><span class="token function">createJobIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token keyword">yield</span> <span class="token string">'bytedance'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">yield</span> <span class="token string">'mydream'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token keyword">yield</span> <span class="token string">'bytedance mydream!'</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">let</span> jobIter <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token function">createJobIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="16"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jobIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bytedance </span></pre></td></tr><tr><td data-num="17"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jobIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// mydream </span></pre></td></tr><tr><td data-num="18"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jobIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bytedance mydream!</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">let</span> nicknameIter <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">createNicknameIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="21"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nicknameIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cosine1 </span></pre></td></tr><tr><td data-num="22"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nicknameIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cosine2 </span></pre></td></tr><tr><td data-num="23"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nicknameIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// cosine3</span></pre></td></tr></table></figure><p>因为支持生成器方法，所以可以通过添加一个默认的迭代器，把类实例变成可迭代对象</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">People</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>nicknames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'cosine1'</span><span class="token punctuation">,</span> <span class="token string">'cosine2'</span><span class="token punctuation">,</span> <span class="token string">'cosine3'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token operator">*</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">yield</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>nicknames<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">let</span> workers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>idx<span class="token punctuation">,</span> nickname<span class="token punctuation">]</span> <span class="token keyword">of</span> workers<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> nickname<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 0 cosine1</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 1 cosine2</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 2 cosine3</span></pre></td></tr></table></figure><h1 id="继承"><a class="anchor" href="#继承">#</a> 继承</h1><p>ES 6 最出色的一点就是原生支持了类继承机制，是之前原型链的一个语法糖</p><h2 id="继承基础"><a class="anchor" href="#继承基础">#</a> 继承基础</h2><p>ES6 类支持<strong>单继承</strong>，使用 <code>extends</code> 关键字，可以继承一个类，也可以继承普通的构造函数（保持向后兼容）</p><ul><li>派生类可以通过原型链访问到类和原型上定义的方法</li><li><code>this</code> 的值会反映调用相应方法的实例或者类。</li><li><code>extends</code> 关键字也可以在类表达式中使用</li></ul><h2 id="构造函数-homeobject-和-super"><a class="anchor" href="#构造函数-homeobject-和-super">#</a> 构造函数、HomeObject 和 super ()</h2><ul><li>派生类的方法可以通过 <code>super</code> 关键字引用它们的原型<ul><li>只能在派生类中使用</li><li>仅限于<strong>类构造函数</strong>、<strong>实例方法</strong>和<strong>静态方法</strong>内部</li><li>在类构造函数中使用 <code>super</code> 可以调用父类构造函数。</li></ul></li><li><code>[[HomeObject]]</code><ul><li>ES6 给<strong>类构造函数</strong>和<strong>静态方法</strong>添加了内部特性 <code>[[HomeObject]]</code></li><li>指向<strong>定义该方法的对象</strong>的指针，这个指针是自动赋值的，而且只能在 JavaScript 引擎内部访问。</li></ul></li><li><code>super</code> 始终会定义为 <code>[[HomeObject]]</code> 的原型。</li></ul><p>在使用 super 时要注意几个问题</p><ul><li><code>super</code> 只能在 <strong>派生类的构造函数和静态方法</strong>中使用</li><li>不能单独引用 <code>super</code> 关键字，要么用它调用构造函数，要么用它引用静态方法</li><li>调用 <code>super()</code> 会调用父类构造函数，并将<strong>返回的实例</strong>赋值给 <code>this</code> ，所以不能在调用 <code>super()</code> 之前引用 <code>this</code></li><li>需要给父类构造函数传参，则需要手动将其传入 <code>super</code></li><li>如果<strong>没有定义类构造函数</strong>，在实例化派生类时会调用 <code>super()</code> ，而且会<strong>传入所有传给派生类的参数</strong></li><li>如果在派生类中显式定义了构造函数，则要么必须在其中调用 <code>super()</code> ，要么必须显式的返回一个对象。</li></ul><h2 id="抽象基类"><a class="anchor" href="#抽象基类">#</a> 抽象基类</h2><p>抽象基类也就是一种<strong>可供其他类继承</strong>，但<strong>本身不会被实例化</strong>的类。在其他语言中也有这种概念。虽然 ECMAScript 没有专门支持这种类的语法 ，但通过 <code>new.target</code> 也很容易实现</p><ul><li><code>new.target</code> 保存通过 <code>new</code> 关键字调用的类或函数</li><li>通过在实例化时检测 <code>new.target</code> 是不是抽象基类，可以<strong>阻止对抽象基类的实例化</strong></li></ul><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 抽象基类 </span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> Vehicle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Vehicle cannot be directly instantiated'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 派生类</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// class Bus &#123;&#125; </span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// class Vehicle &#123;&#125; </span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// Error: Vehicle cannot be directly instantiated</span></pre></td></tr></table></figure><p>通过在抽象基类的构造函数中进行检查，可以要求派生类必须定义某个方法。因为原型方法在调用原型类的构造函数之前就已经存在了，所以可以通过 this 关键字来检查相应的方法是否定义</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 抽象基类</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> Vehicle<span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Vehicle cannot be directly instantiated'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Inheriting class must define foo()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 派生类</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 派生类</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Van</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// success! </span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">new</span> <span class="token class-name">Van</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: Inheriting class must define foo()</span></pre></td></tr></table></figure><h2 id="继承内置类型"><a class="anchor" href="#继承内置类型">#</a> 继承内置类型</h2><p>ES6 类为继承内置引用类型提供了顺畅的机制，开发者可以方便地扩展内置类型，如下，向 Array 添加了一个洗牌算法的方法</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">SuperArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token comment">// 加一个洗牌算法</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre>            <span class="token keyword">const</span> j <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 生成 [0, i+1) 的随机数</span></pre></td></tr><tr><td data-num="6"></td><td><pre>            <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// 交换两张牌</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true </span></pre></td></tr><tr><td data-num="12"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token keyword">instanceof</span> <span class="token class-name">SuperArray</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></pre></td></tr><tr><td data-num="13"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5] </span></pre></td></tr><tr><td data-num="14"></td><td><pre>a<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="15"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 随机的新数组</span></pre></td></tr><tr><td data-num="16"></td><td><pre>a<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="17"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 随机的新数组</span></pre></td></tr></table></figure><p>有些内置类型的方法会返回新实例。默认情况下，返回实例的类型与原始实例的类型是一致的，但如果想覆盖这个默认行为，则<strong>可以覆盖</strong> <code>Symbol.species</code> 访问器，这个访问器<strong>决定在创建返回的实例时使用的类</strong></p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">SuperArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>species<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">return</span> Array<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">let</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">let</span> a2 <span class="token operator">=</span> a1<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=></span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>x<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> </pre></td></tr><tr><td data-num="8"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5] </span></pre></td></tr><tr><td data-num="9"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 3, 5] </span></pre></td></tr><tr><td data-num="10"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a1 <span class="token keyword">instanceof</span> <span class="token class-name">SuperArray</span><span class="token punctuation">,</span> a1 <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true true</span></pre></td></tr><tr><td data-num="11"></td><td><pre>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a2 <span class="token keyword">instanceof</span> <span class="token class-name">SuperArray</span><span class="token punctuation">,</span> a2 <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false true</span></pre></td></tr></table></figure><h2 id="类混入多继承的模拟实现"><a class="anchor" href="#类混入多继承的模拟实现">#</a> 类混入（多继承的模拟实现）</h2><p>将不同类的行为集中到一个类是一种常见的 JavaScript 模式。虽然 ES6 <strong>没有显式支持多类继承</strong>，但通过现有特性可以轻松地模拟这种行为。</p><p>首先要注意以下两点：</p><ul><li>如果只是需要<strong>混入多个对象的属性</strong>，那么使用 <code>Object.assign()</code> 就可以了。<ul><li><code>Object.assign()</code> 方法是为了专门为了混入对象行为而设计的。只有在需要<strong>混入类的行为</strong>时才有必要<strong>自己实现混入表达式</strong>。</li></ul></li><li>很多 JavaScript 框架（特别是 React）已经<strong>抛弃混入模式</strong>，转向了组合模式<ul><li>组合即是把方法提取到独立的类和辅助对象中，然后把它们组合起来，不使用继承。</li><li>众所周知的软件设计原则：<strong>“组合胜过继承（composition over inheritance）。”</strong></li></ul></li></ul><p><code>extends</code> 关键字后面可以是一个 <strong>JavaScript 表达式</strong>。任何可以解析为一个类或一个构造函数的表达式都是<strong>有效</strong>的。这个表达式会在<strong>求值类定义时被求值</strong>，这就是类混入的原理</p><p>如 Person 类需要组合类 A、B、C，则需要某种机制实现 B 继承 A，C 继承 B，而 Person 再继承 C 从而实现将 A、B、C 组合至这个超类中：</p><figure class="highlight js"><figcaption data-lang="JavaScript"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">let</span> <span class="token function-variable function">AMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">afunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'A Mixin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">let</span> <span class="token function-variable function">BMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">bfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'B Mixin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">let</span> <span class="token function-variable function">CMixin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">Superclass</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Superclass <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">cfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'C Mixin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">function</span> <span class="token function">mixin</span><span class="token punctuation">(</span><span class="token parameter">BaseClass<span class="token punctuation">,</span> <span class="token operator">...</span>Mixins</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> Mixins<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> current</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">current</span><span class="token punctuation">(</span>accumulator<span class="token punctuation">)</span><span class="token punctuation">,</span> BaseClass<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Bus</span> <span class="token keyword">extends</span> <span class="token class-name">mixin</span><span class="token punctuation">(</span>Vehicle<span class="token punctuation">,</span> AMixin<span class="token punctuation">,</span> BMixin<span class="token punctuation">,</span> CMixin<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="16"></td><td><pre>b<span class="token punctuation">.</span><span class="token function">afunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// A Mixin </span></pre></td></tr><tr><td data-num="17"></td><td><pre>b<span class="token punctuation">.</span><span class="token function">bfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// B Mixin </span></pre></td></tr><tr><td data-num="18"></td><td><pre>b<span class="token punctuation">.</span><span class="token function">cfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// C Mixin</span></pre></td></tr></table></figure><h1 id="小结"><a class="anchor" href="#小结">#</a> 小结</h1><ul><li>ECMAScript 6 新增的类很大程度上是基于既有原型机制的语法糖</li><li>类的语法让开发者可以优雅地定义向后兼容的类</li><li>类既可以继承内置类型，也可以继承自定义类型</li><li>类有效地跨越了<strong>对象实例</strong>、<strong>对象原型</strong>和<strong>对象类</strong>之间的鸿沟</li><li>通过 <strong>类混入</strong> 可以巧妙地实现类似多继承的效果，但不建议这么做，因为 “组合胜过继承”</li></ul><div class="tags"><a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"><i class="ic i-tag"></i> 前端</a> <a href="/tags/JavaScript/" rel="tag"><i class="ic i-tag"></i> JavaScript</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-05-28 21:42:45" itemprop="dateModified" datetime="2023-05-28T21:42:45+08:00">2023-05-28</time> </span><span id="js-learning-2/" class="item leancloud_visitors" data-flag-title="深入 JavaScript 学习之路（二）JavaScript 中的类" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/img/wechatpay.png" alt="liuhuan 微信支付"><p>微信支付</p></div><div><img data-src="/img/alipay.png" alt="liuhuan 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>作者： </strong>liuhuan <i class="ic i-at"><em>@</em></i>刘欢の博客</li><li class="link"><strong>本文链接：</strong> <a href="http://www.liuhuanblog.top/js-learning-2/" title="深入 JavaScript 学习之路（二）JavaScript 中的类">http://www.liuhuanblog.top/js-learning-2/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/coding-train/leetcode/bytedance/bytedance-day10/" itemprop="url" rel="prev" data-background-image="&#x2F;img&#x2F;header_img&#x2F;milky-way-over-bow-lake-alberta-canada-wallpaper-for-1920x1080-63-873.jpg" title="冲刺春招-精选笔面试66题大通关day10"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 字节校园</span><h3>冲刺春招-精选笔面试66题大通关day10</h3></a></div><div class="item right"><a href="/coding-train/leetcode/bytedance/bytedance-day11/" itemprop="url" rel="next" data-background-image="&#x2F;img&#x2F;header_img&#x2F;milky-way-over-bow-lake-alberta-canada-wallpaper-for-1920x1080-63-873.jpg" title="冲刺春招-精选笔面试66题大通关day11"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 字节校园</span><h3>冲刺春招-精选笔面试66题大通关day11</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB%E5%AE%9A%E4%B9%89"><span class="toc-number">1.</span> <span class="toc-text">类定义</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%9E%84%E6%88%90"><span class="toc-number">1.1.</span> <span class="toc-text">类构成</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">类构造函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%9E%E4%BE%8B%E5%8C%96"><span class="toc-number">2.1.</span> <span class="toc-text">1、实例化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%B1%BB%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">2.2.</span> <span class="toc-text">2、类的本质？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B-%E5%8E%9F%E5%9E%8B%E5%92%8C%E7%B1%BB%E6%88%90%E5%91%98"><span class="toc-number">3.</span> <span class="toc-text">实例、原型和类成员</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%88%90%E5%91%98"><span class="toc-number">3.1.</span> <span class="toc-text">实例成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E6%88%90%E5%91%98"><span class="toc-number">3.2.</span> <span class="toc-text">原型成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-number">3.3.</span> <span class="toc-text">静态类方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B%E5%92%8C%E7%B1%BB%E6%88%90%E5%91%98"><span class="toc-number">3.4.</span> <span class="toc-text">非函数原型和类成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8%E6%96%B9%E6%B3%95"><span class="toc-number">3.5.</span> <span class="toc-text">迭代器与生成器方法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">4.</span> <span class="toc-text">继承</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%9F%BA%E7%A1%80"><span class="toc-number">4.1.</span> <span class="toc-text">继承基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-homeobject-%E5%92%8C-super"><span class="toc-number">4.2.</span> <span class="toc-text">构造函数、HomeObject 和 super ()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%9F%BA%E7%B1%BB"><span class="toc-number">4.3.</span> <span class="toc-text">抽象基类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.4.</span> <span class="toc-text">继承内置类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E6%B7%B7%E5%85%A5%E5%A4%9A%E7%BB%A7%E6%89%BF%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.5.</span> <span class="toc-text">类混入（多继承的模拟实现）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">5.</span> <span class="toc-text">小结</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/js-learning-1/" rel="bookmark" title="深入JavaScript学习之路（一）对象、类与面向对象编程">深入JavaScript学习之路（一）对象、类与面向对象编程</a></li><li class="active"><a href="/js-learning-2/" rel="bookmark" title="深入JavaScript学习之路（二）JavaScript中的类">深入JavaScript学习之路（二）JavaScript中的类</a></li><li><a href="/onclick-and-addeventlistener-difference/" rel="bookmark" title="前端面试之onclick与addEventListener区别详述">前端面试之onclick与addEventListener区别详述</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="liuhuan" data-src="/img/avatar.jpg"><p class="name" itemprop="name">liuhuan</p><div class="description" itemprop="description">东偶已逝 桑榆非晚</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">155</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">20</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">105</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tLzE0N2NhaQ==" title="https:&#x2F;&#x2F;github.com&#x2F;147cai"><i class="ic i-github"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjMyNDQ3MzU4MTZAcXEuY29t" title="mailto:3244735816@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li><li class="item"><a href="/musics/" rel="section"><i class="ic i-music"></i>歌单</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/coding-train/leetcode/bytedance/bytedance-day10/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/coding-train/leetcode/bytedance/bytedance-day11/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/coding-train/" title="分类于 题目记录">题目记录</a> <i class="ic i-angle-right"></i> <a href="/categories/coding-train/offer/" title="分类于 剑指 offer">剑指 offer</a></div><span><a href="/coding-train/leetcode/offer/day14" title="剑指offer day14 搜索与回溯算法（中等）">剑指offer day14 搜索与回溯算法（中等）<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/coding-train/" title="分类于 题目记录">题目记录</a> <i class="ic i-angle-right"></i> <a href="/categories/coding-train/offer/" title="分类于 剑指 offer">剑指 offer</a></div><span><a href="/coding-train/leetcode/offer/day31" title="剑指offer day31 数学（困难）">剑指offer day31 数学（困难）<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/cs-basics/" title="分类于 CS 基础">CS 基础</a></div><span><a href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E6%9C%9F%E6%9C%AB%E5%B0%8F%E6%B5%8B" title="软件工程期末小测">软件工程期末小测<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/data-structure/" title="分类于 数据结构">数据结构</a></div><span><a href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9C5%EF%BC%9E%20%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E4%B8%8E%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91" title="数据结构学习笔记＜5＞ 二叉搜索树与平衡二叉树">数据结构学习笔记＜5＞ 二叉搜索树与平衡二叉树<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/bytedance-note/" title="分类于 青训营笔记">青训营笔记</a></div><span><a href="/back-end/go_learning_3" title="Go语言初上手（三）编码规范与性能优化 | 青训营">Go语言初上手（三）编码规范与性能优化 | 青训营<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/coding-train/" title="分类于 题目记录">题目记录</a> <i class="ic i-angle-right"></i> <a href="/categories/coding-train/offer/" title="分类于 剑指 offer">剑指 offer</a></div><span><a href="/coding-train/leetcode/offer/day9" title="剑指offer day9 动态规划（中等）">剑指offer day9 动态规划（中等）<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/coding-train/" title="分类于 题目记录">题目记录</a> <i class="ic i-angle-right"></i> <a href="/categories/coding-train/bytedance/" title="分类于 字节校园">字节校园</a></div><span><a href="/coding-train/leetcode/bytedance/bytedance-day8" title="冲刺春招-精选笔面试66题大通关day8">冲刺春招-精选笔面试66题大通关day8<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/note/" title="分类于 笔记">笔记</a> <i class="ic i-angle-right"></i> <a href="/categories/note/cs-basics/" title="分类于 CS 基础">CS 基础</a></div><span><a href="/compile-learning-experiment_2" title="编译原理 实验二 LL(1)分析法程序">编译原理 实验二 LL(1)分析法程序<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/coding-train/" title="分类于 题目记录">题目记录</a> <i class="ic i-angle-right"></i> <a href="/categories/coding-train/offer/" title="分类于 剑指 offer">剑指 offer</a></div><span><a href="/coding-train/leetcode/offer/day16" title="剑指offer day16 排序（简单）">剑指offer day16 排序（简单）<i class="ic i-link-alt"></i></a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/coding-train/" title="分类于 题目记录">题目记录</a> <i class="ic i-angle-right"></i> <a href="/categories/coding-train/offer/" title="分类于 剑指 offer">剑指 offer</a></div><span><a href="/coding-train/leetcode/offer/day29" title="剑指offer day29 动态规划（困难）">剑指offer day29 动态规划（困难）<i class="ic i-link-alt"></i></a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">liuhuan @ liuhuan</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">695k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">10:31</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"js-learning-2/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//fastly.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->